<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.UserMapper">

    <!-- 为了返回list 类型而定义的returnMap -->
    <resultMap type="user" id="resultUser">
        <id column="uid" property="uid" />
        <result column="name" property="name" />
        <result column="password" property="password" />
    </resultMap>

    <!-- User 联合 Order 查询 方法的配置 (多对一的方式)  -->
    <resultMap id="resultUserOrders" type="order">
        <id property="oid" column="oid" />
        <result property="rece_adder" column="rece_adder" />
        <association property="user" javaType="user">
            <id property="uid" column="uid" />
        </association>
    </resultMap>

    <select id="getUserOrders" parameterType="int" resultMap="resultUserOrders">
	   SELECT u.*,o.* FROM `user` u, `order_user` o
	          WHERE u.uid=o.uid AND u.uid=#{uid}
	</select>

    <select id="getUserById" resultMap="resultUser" parameterType="int">
		SELECT *
		FROM user
		WHERE uid=#{uuid}
	</select>

    <select id="login" resultMap="resultUser">
        select * from user where name=#{name} and password=#{password}
    </select>


</mapper>